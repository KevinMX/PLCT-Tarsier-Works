修订记录

| 日期       | 修订版本 | 修改描述  | 作者    |
|------------|----------|-------|---------|
| 2023/07/14 | 0.1      | 模板/初稿 | KevinMX |

# openEuler 23.03 RISC-V 版本测试报告

关键词：

测试策略 测试报告 openEuler RISC-V

摘要：

文本主要描述 openEuler 23.09 版本的整体测试过程，详细叙述测试覆盖情况，并通过问题分析对版本整体质量进行评估和总结。


# 1. 概述

openEuler 是一款开源操作系统。当前 openEuler 内核源于 Linux，支持多种处理器架构，是由全球开源贡献者构建的高效、稳定、安全的开源操作系统。

openEuler RISC-V 广泛支持国内外 RISC-V 架构处理器，适配全志 D1、Sipeed LicheeRV、HiFive Unmatched、StarFive VisionFive 等多款开发板。

本文主要描述 openEuler 23.09 版本的总体测试活动，按照社区开发模式进行运作，结合社区 release-management 团队制定的版本计划规划相应的测试计划及活动。测试报告覆盖新需求、继承需求的测试执行情况和评估，并结合各类专项测试活动和版本问题单总体情况进行整体的说明和质量评估。

# 2. 测试环境

## 2.1. 软件版本信息

系统：openEuler RISC-V 23.09 preview, [base 镜像](https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-23.03-V1-riscv64/QEMU/openEuler-23.03-V1-base-qemu-preview.qcow2.zst) + [默认启动脚本](https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-23.03-V1-riscv64/QEMU/start_vm.sh)，脚本中添加 `-cpu rv64,sv39=on`

[xfce 镜像](https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-23.03-V1-riscv64/QEMU/openEuler-23.03-V1-xfce-qemu-preview.qcow2.zst) 和 [xfce 启动脚本](https://mirror.iscas.ac.cn/openeuler-sig-riscv/openEuler-RISC-V/preview/openEuler-23.03-V1-riscv64/QEMU/start_vm_xfce.sh) 供测试 xfce 使用；其他桌面环境测试/需要 GUI 的测试也可使用 xfce 启动脚本。同样推荐使用 QEMU ≥ 8.0 并在脚本中添加 `-cpu rv64,sv39=on`。

QEMU 版本：要求 ≥ 8.0，推荐最新版（截止此文档编写时，最新发布版本为 8.0.3）；如宿主机发行版提供的 QEMU 不满足要求，请参考 [QEMU 官方文档](https://wiki.qemu.org/Hosts/Linux) 自行编译安装最新版。

软件源：镜像默认

CPU 核心数：启动脚本默认（8）

内存大小：除非另有说明，采用镜像默认（4GB）

## 2.2 版本测试计划

openEuler 23.09 版本按照社区 release-manager 团队的计划，共规划5轮测试，详细的版本信息和测试时间如下表：

| Stage  name          | Begin time | End time  | Days | Note                                                |
|----------------------|------------|-----------|------|-----------------------------------------------------|
| Collect key features | 2023/6/21  | 2023/7/20 | 30   | 收集23.09版本关键特性（各SIG自行录入release-plan）    |
| Develop              | 2023/6/26  | 2023/8/25 | 60   | 特性完成开发和自验证，代码提交合入23.09              |
| 内核升级             | 2023/6/26  | 2023/7/7  | 10   | master主线升级内核到6.4                             |
| BaseOS构建           | 2023/7/10  | 2023/7/21 | 10   | Master主线BaseOS构建，基础包能用                     |
| BaseOS测试           | 2023/7/24  | 2023/7/28 | 5    | 内核升级后BaseOS可用                                |
| 分支全量Build        | 2023/7/31  | 2023/8/11 | 10   | 从master拉23.09分支，完成分支全量构建，基础包升级完毕 |
| Alpha                | 2023/8/14  | 2023/8/18 | 5    | 软件包升级完成，首版本发布                           |
| Test round 1         | 2023/8/21  | 2023/8/25 | 5    | 版本启动测试，内核冻结                               |
| Test round 2         | 2023/8/28  | 2023/9/1  | 5    |                                                     |
| Test round 3         | 2023/9/4   | 2023/9/8  | 5    | 特性合入冻结，不再接纳新特性代码合入                 |
| Test round 4         | 2023/9/11  | 2023/9/15 | 5    |                                                     |
| Test round 5         | 2023/9/18  | 2023/9/22 | 5    |                                                     |
| Release              | 2023/9/28  | 2023/9/28 | 1    |                                                     |

## 2.3 需求清单

openEuler 23.03 版本交付[需求列表](https://gitee.com/openeuler/release-management/blob/master/openEuler-23.03/release-plan.md)如下：

| no | feature | status | sig | owner | 发布方式 | 涉及软件包列表 |
|:---|:--------|:-------|:----|:------|:---------|:---------------|
|    |         |        |     |       |          |                |


# 3 版本概要测试结论

   openEuler 23.03 版本整体测试按照release-manager团队的计划，1 轮重点特性测试 + 2 轮全量测试 + 1 轮回归测试 + 1 轮版本发布验收测试；第1轮重点特性测试聚焦在新特性全量功能和继承特性自动化验证，另外开展安全CVE扫描及OS基础性能摸底和系统整体集成验证，旨在识别阻塞性问题；另外2轮全量测试开展版本交付的所有特性和各类专项测试；1轮回归测通过自动化测试重点覆盖问题单较多模块的覆盖和扩展测试，验证问题的修复和影响程度；版本发布验收测试是在版本正式发布至官网后开展的轻量化验证活动，旨在保证发布件和测试验证过程交付件的一致性。

   openEuler 23.03 版本共发现问题 __ 个，有效问题 __ 个，无效问题 __ 个。遗留问题 __ 个(详见遗留问题章节)。版本整体质量良好。

# 4 版本详细测试结论

openEuler 23.03 版本详细测试内容包括：

1、完成重要组件包括内核、容器、虚拟化、编译器和从历史版本继承特性的全量功能验证，组件和特性质量较好；

2、对发布软件包通过软件包专项完成了软件包的安装卸载、升级回滚、编译、命令行、服务检查等测试，测试较充分，质量良好；

3、系统集成测试覆盖系统配置、文件系统、服务和用户管理及网络、存储等多个方面，系统整体集成验证无风险；

4、专项测试包括性能专项、安全专项、兼容性测试、可靠性测试、资料测试；

## 4.1 特性测试结论

### 4.1.1   继承特性评价

对产品所有继承特性进行评价，用表格形式评价，包括特性列表（与特性清单保持一致），验证质量评估

| **需求** | **开发主体** | **测试主体** | **测试分层策略** |
|----------|--------------|--------------|------------------|
|          |              |              |                  |

<font color=red>●</font>： 表示特性不稳定，风险高

<font color=blue>▲</font>： 表示特性基本可用，遗留少量问题

<font color=green>█</font>： 表示特性质量良好

### 4.1.2   新需求评价

建议以表格的形式汇总新特性测试执行情况及遗留问题单情况的评估,给出特性质量评估结论。

| **序号** | **特性名称** | **测试覆盖情况** | **约束依赖说明** | **遗留问题单** | **质量评估** | **备注** |
|----------|--------------|------------------|------------------|----------------|--------------|----------|
|          |              |                  |                  |                |              |          |

<font color=red>●</font>： 表示特性不稳定，风险高

<font color=blue>▲</font>： 表示特性基本可用，遗留少量问题

<font color=green>█</font>： 表示特性质量良好

## 4.2 兼容性测试结论

### 4.2.1 南向兼容性

目前 RISC-V 版本主要针对 QEMU 提供支持，不适用南向兼容性测试。

## 4.3 专项测试结论

### 基础性能测试

### 内核测试

### 长稳测试

### 编译器测试

# 5 问题单统计

openEuler 23.03  版本共发现问题 __ 个，有效问题 __ 个，其中遗留问题 __ 个。详细分布见下表:

| 测试阶段               | 问题总数 | 有效问题单数 | 无效问题单数 | 挂起问题单数 | 备注                       |
|------------------------|----------|--------------|--------------|--------------|----------------------------|
| openEuler 23.03 alpha  |          |              |              |              | ALPHA DT轮次               |
| openEuler 23.03 round1 |          |              |              |              |                            |
| openEuler 23.03 round2 |          |              |              |              | 全量集成                   |
| openEuler 23.03 round3 |          |              |              |              | 全量集成                   |
| openEuler 23.03 round4 |          |              |              |              | 回归测试                   |
| openEuler 23.03 round5 |          |              |              |              | 版本发布验收测试(回归测试) |

1. 本版本基于单点问题补充的专项测试活动：
   * 单包构建专项排查：23.03为创新版本，涉及大量的软件包选型升级，因此在版本测试活动基于构建系统的构建情况对软件包构建问题进行排查，此类issue单共96个，其中有效问题95个，其中92个问题已验收闭环，3个问题待回归。
   * 安全编译选项排查：不满足[安全编译选项](https://gitee.com/openeuler/security-committee/blob/master/guide/SecureCompile(C&C++).md)，此类issue单共101个，其中有效单99个。该专项活动持续进行。当前有效问题单均已验收闭环。
2. RC4问题分析：共计发现18个问题，17个有效问题，15个问题需要在round5进行回归验证。待回归问题单没有无法闭环的风险，大部分为次要问题。
3. RC5回归分析：RC4修复的15个问题均完成验收，没有额外遗留问题流出。
4. 版本问题总结：从RC1到RC5，问题数量呈收敛趋势，每一轮迭代转测前问题解决率符合QA-sig制定的转测质量checklist要求，当前整体问题解决率达100%，闭环率达100%，全部问题单已完成回归，版本整体质量良好。

# 6   附件

## 遗留问题列表

| 序号 | 问题单号 | 问题简述 | 问题级别 | 影响分析 | 规避措施 | 历史发现场景 |
| --- | ------- | ------ | ------- | ------- | ------- | ---------- |